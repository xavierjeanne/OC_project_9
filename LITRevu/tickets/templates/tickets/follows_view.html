{% extends "base.html" %}
{% block content %}

<h2>Abonnements</h2>

<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Suivre</button>
</form>

{% if message %}
    <p style="color: red;">{{ message }}</p>
{% endif %}

<h3>Utilisateurs que vous suivez</h3>
<ul>
    {% for relation in following %}
        <li>
            {{ relation.followed.username }}
            <form method="post" action="{% url 'unfollow' relation.followed.id %}" style="display:inline;">
                {% csrf_token %}
                <button type="submit">Se d√©sabonner</button>
            </form>
        </li>
    {% empty %}
        <li>Vous ne suivez personne.</li>
    {% endfor %}
</ul>

<h3>Utilisateurs qui vous suivent</h3>
<ul>
    {% for relation in followers %}
        <li>{{ relation.follower.username }}</li>
    {% empty %}
        <li>Personne ne vous suit.</li>
    {% endfor %}
</ul>

{% endblock %}